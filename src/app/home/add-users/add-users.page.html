<ion-header translucent>
  <ion-row class="ion-justify-content-center">
    <ion-col size="10" size-sm="8" size-md="6" >
      <ion-toolbar >

          <ion-icon style="zoom: normal"  name="home" routerLink="/home"></ion-icon>

      </ion-toolbar>
    </ion-col>
  </ion-row>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-sm="8" size-md="6" size-lg="4">
        <form [formGroup]="userForm"  enctype="multipart/form-data">
          <ion-card>
            <input type="file"[formControlName]="'avatar'" name="avatar" accept=".jpg, .jpeg, .png" (change)="Uploadavatar($event)">
            <ion-card-header style="display: flex; justify-content: center">
              <ion-avatar *ngIf="avatar">
                <img [src]="avatar" class="avatar">
              </ion-avatar>
              <ion-avatar *ngIf="!avatar">
                <img class="avatar" src="assets/images/avatar.png">
              </ion-avatar>
            </ion-card-header>

            <ion-card-content>



              <ion-item lines="full">
                <ion-label position="floating">Nom</ion-label>
                <ion-input type="text" [formArrayName]="'nom'" required ></ion-input>
              </ion-item>
<!--              <ion-label color="danger" class="error" >-->
<!--                <ion-label  >Ce champ est obligatoire</ion-label>-->
<!--                <ion-label  >Le nom est trop court, ça doit comporter au minimum 2 caractères!</ion-label>-->
<!--              </ion-label>-->

              <ion-item lines="full" >
                <ion-label position="floating">Prénom</ion-label>
                <ion-input type="text" [formControlName]="'prenom'" required ></ion-input>
              </ion-item>
<!--              <ion-label color="danger" class="error" >-->
<!--                <ion-label >Ce champ est obligatoire</ion-label>-->
<!--                <ion-label >Le prènom est trop court, ça doit comporter au minimum 2 caractères!</ion-label>-->
<!--              </ion-label>-->
              <!--                            <ion-label color="danger" class="ion-justify-content-center error" *ngIf="nomEmetteur.hasError('required') && nomEmetteur.touched">Veuillez bien saisir le nom de l'émetteur!</ion-label>-->

              <ion-item lines="full" >
                <ion-label position="floating">Nom d'utilisateur</ion-label>
                <ion-input type="text" [formControlName]="'username'" required ></ion-input>
              </ion-item>
<!--              <ion-label color="danger" class="error" >-->
<!--                <ion-label >Ce champ est obligatoire</ion-label>-->
<!--                <ion-label >Le nom d'utilisateur est trop court, ça doit comporter au minimum 5 caractères</ion-label>-->
<!--              </ion-label>-->

              <ion-item lines="full" >
                <ion-label position="floating">N° carte d'identité</ion-label>
                <ion-input type="number" [formControlName]="'cni'" required ></ion-input>
              </ion-item>
<!--              <ion-label color="danger" class="error" >-->
<!--                <ion-label >Ce champ est obligatoire</ion-label>-->
<!--                <ion-label >L'identifiant doit comporter au minimum 9 chiffres!</ion-label>-->
<!--              </ion-label>-->

              <ion-item lines="full" >
                <ion-label position="floating">Téléphone</ion-label>
                <ion-input type="number" [formControlName]="'phone'" required ></ion-input>
              </ion-item>
<!--              <ion-label color="danger" class="error" >-->
<!--                <ion-label >Ce champ est obligatoire</ion-label>-->
<!--                <ion-label >Le numéro de téléphone doit contenir 9 chiffres!</ion-label>-->
<!--              </ion-label>-->

              <ion-item lines="full" >
                <ion-label position="floating">Adresse</ion-label>
                <ion-input type="text" [formControlName]="'adresse'" required ></ion-input>
              </ion-item>

              <ion-item lines="full" >
                <ion-label>Profil</ion-label>
                <ion-select placeholder="définissez le profil" [formControlName]="'profil'" value="profil">
                  <ion-select-option *ngFor="let profil of profils" value="profil" >{{profil.libelle}}</ion-select-option>
                </ion-select>
              </ion-item>

              <ion-item lines="full" >
                <ion-label>Agence</ion-label>
                <ion-select placeholder="précisez l'agence" [formControlName]="'agence'">
                  <ion-select-option *ngFor="let agence of agences" value="{{agence.id}}" >{{agence.nomAgence}}</ion-select-option>
                </ion-select>
              </ion-item>

              <ion-item lines="full" >
                <ion-label position="floating">Mot de passe</ion-label>
                <ion-input type="password" [formControlName]="'password'" required ></ion-input>
              </ion-item>
<!--              <ion-label class="error" color="danger" >-->
<!--                <ion-label >Ce champ est obligatoire</ion-label>-->
<!--                <ion-label >Le mot de passe est trop court, ça doit comporter au minimum 5 caractères!</ion-label>-->
<!--              </ion-label>-->


                <ion-item lines="full" >
                  <ion-label position="floating">Confirmez le mot de passe</ion-label>
                  <ion-input type="password" [formControlName]="'confirmPassword'"></ion-input>
                </ion-item>
                <!--                                  <ion-label color="danger" *ngIf="submitted || Val.confirmPassword.errors && Val.confirmPassword.touched">-->
<!--                <ion-label  class="error" color="danger">Les mots de passe ne correspondent pas!</ion-label>-->
                <!--                                      <ion-label *ngIf="Validations.password.errors.minlength">Le mot de passe est trop court, ça doit comporter au minimum 5 caractères!</ion-label>-->
                <!--                                  </ion-label>-->
                <!--                                  <ion-label *ngIf="errorConfirmPassword">Les mots de passe ne correspondent pas!</ion-label>-->

              <!--                            <ion-label  color="danger" *ngIf="phoneEmetteur.hasError('required') && phoneEmetteur.touched" class="ion-justify-content-center error">Veuillez saisir le numéro de l'émetteur!</ion-label>-->

              <ion-row class="ion-justify-content-end ion-margin-top ion-margin-bottom">
                <ion-col class="ion-margin-bottom">
                  <ion-button expand="block"  class="ion-justify-content-end ion-margin-top ion-margin-bottom" color="secondary" shape="round" (click)="addUsers()">Valider</ion-button>
                  <!--                                <input type="hidden"  class="ion-justify-content-end ion-margin-top ion-margin-bottom">-->
                </ion-col>
              </ion-row>

            </ion-card-content>

          </ion-card>
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
